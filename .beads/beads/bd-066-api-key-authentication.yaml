id: bd-066
type: feature
title: Add API key authentication for REST endpoints
description: |
  Implement API key authentication to secure REST endpoints and enable basic
  access control.
  
  VERIFIED COMPLETE - All features already implemented:
  
  ✅ API key schema and storage (internal/auth/models.go)
    - APIKey struct with ID, Name, UserID, KeyPrefix, KeyHash, Permissions
    - Secure storage with bcrypt hashing
    - Expiration support
    - Last used tracking
  
  ✅ Key generation and validation (internal/auth/manager.go)
    - CreateAPIKey() generates secure random keys
    - ValidateAPIKey() checks hash and expiration
    - Permission validation
  
  ✅ Authentication middleware (internal/auth/middleware.go)
    - JWT bearer token support
    - API key support (X-API-Key header)
    - Context injection for user info
  
  ✅ All API endpoints secured (internal/api/server.go)
    - authMiddleware applied to all routes
    - Returns 401 for unauthenticated requests
    - Exempts: health, login, static files, streaming
    - config.yaml: enable_auth=true
  
  ✅ API key management endpoints
    - POST /api/v1/auth/login - Get JWT token
    - POST /api/v1/auth/api-keys - Create API key
    - GET /api/v1/auth/api-keys - List user's keys
    - DELETE /api/v1/auth/api-keys/{id} - Revoke key
    - POST /api/v1/auth/change-password
    - GET /api/v1/auth/me - Current user info
  
  Default credentials:
  - Username: admin
  - Password: admin
  
  Documentation: docs/AUTH.md

status: closed
priority: 1
project_id: agenticorp
assigned_to: claude
blocked_by: []
blocks:
  - bd-067
  - bd-068
parent: bd-052
children: []
tags:
  - feature
  - authentication
  - security
  - p1
created_at: 2026-01-20T00:00:00Z
updated_at: 2026-01-21T02:20:00Z
closed_at: 2026-01-21T02:20:00Z
context:
  source: product-manager future goals
  epic: bd-052
