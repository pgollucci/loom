entitymetadata:
    schemaversion: ""
    attributes: {}
    migratedat: null
    migratedfrom: ""
id: bd-018
type: task
title: Ask the web designer to improve button accessibility
description: Review and improve accessibility of buttons in the UI, focusing on color contrast and screen reader support.
status: in_progress
priority: 1
projectid: agenticorp-self
assignedto: agent-1769123855-Web Designer (Active)
blockedby: []
blocks: []
relatedto: []
parent: ""
children: []
tags: []
context:
    agent_id: agent-1769123855-Web Designer (Active)
    agent_output: "We need to respond with the output format: 1) Short plan, 2) Key questions/risks, 3) Concrete next actions (commands/files to change), 4) Proposed patch snippets if applicable.\n\nWe are working on bead bd-018: Ask the web designer to improve button accessibility. We need to improve accessibility of buttons focusing on color contrast and screen reader support.\n\nWe can propose reviewing button component files, maybe CSS, HTML. Provide plan: audit buttons, check contrast, add ARIA labels, ensure focus states, etc.\n\nWe should ask the web designer. Provide concrete next actions: run lighthouse, check CSS variables, edit files like components/Button.css, components/Button.tsx, etc.\n\nProvide patch snippet showing adding aria-label, focus-visible styles, color contrast adjustments.\n\nWe must stay within autonomy: this is within P1 but we can propose changes autonomously. However bead description says \"Ask the web designer to improve button accessibility\". So we need to request the designer? Probably we need to create a decision bead? But we are to output next actions.\n\nWe can propose to generate a patch to improve button accessibility directly (since within autonomy). But the bead says \"Ask the web designer to improve button accessibility\". So maybe we need to create a request, but we can also implement improvements.\n\nI think we can propose a patch that adds aria-label, ensures contrast, adds focus styles.\n\nLet's produce:\n\n1) Short plan: audit all button components, identify low contrast, add ARIA labels, ensure focus outline, update CSS.\n\n2) Key questions/risks: design system consistency, possible regression, need designer approval for color changes.\n\n3) Concrete next actions: run accessibility linter, inspect button components, modify files: src/components/Button.tsx, src/styles/button.css, add CSS, run tests.\n\n4) Proposed patch snippets: show modifications.\n\nWe'll output in plain text.\n</think>\n**1) Short plan**  \n- Audit every button in the UI for color contrast, focus visibility, and screen‑reader labeling.  \n- Update the shared `Button` component to meet WCAG 2.1 AA contrast ratios (≥ 4.5:1 for normal text).  \n- Add missing `aria-label`/`aria-describedby` where the button text alone isn’t sufficient.  \n- Ensure focus-visible outlines meet contrast and are not removed by custom styling.  \n- Run automated checks (axe‑core, Lighthouse) and manual keyboard testing.  \n- Commit the changes and open a short review for the web designer to sign‑off on any color tweaks.\n\n---\n\n**2) Key questions / risks**  \n- **Design token consistency** – Changing button colors may affect the design system; we must keep the token names intact.  \n- **Regression risk** – Buttons are used in forms, modals, and navigation; any style change could break layout or cause overlap on small screens.  \n- **Designer bandwidth** – The designer may need time to review and approve contrast adjustments; we should keep changes minimal and data‑driven.  \n- **Screen‑reader overload** – Adding `aria-label`s that duplicate visible text can be confusing; we must ensure labels are concise and only added when needed.\n\n---\n\n**3) Concrete next actions**  \n\n| Action | Command / File |\n|--------|----------------|\n| 1. Locate all button instances in the codebase | `git grep -i '<button' -- *.tsx *.tsx.html` |\n| 2. Run automated accessibility audit on the built UI | `npm run test:accessibility` *(assumes a script that runs axe‑core)* |\n| 3. Verify contrast ratios for each button’s background / foreground | Use Chrome DevTools “Contrast” audit or `npx wcag-contrast-checker` |\n| 4. Add/fix focus-visible styles in `src/styles/button.css` | `vim src/styles/button.css` |\n| 5. Edit the `Button` component to include ARIA attributes where missing | `vim src/components/Button.tsx` |\n| 6. Run unit & integration tests to ensure no UI breakage | `npm test` |\n| 7. Create a PR with the changes and tag the web designer for review | `git checkout -b bd-018-accessibility` → `git push -u origin HEAD` → Open PR |\n\n---\n\n**4) Proposed patch snippets**\n\n*src/styles/button.css* – Ensure contrast and focus visibility  \n\n```css\n/* Existing */\n.button {\n  background-color: var(--color-primary);\n  color: var(--color-on-primary);\n  border: none;\n  padding: 0.5rem 1rem;\n  border-radius: 4px;\n  cursor: pointer;\n}\n\n/* Updated – higher contrast & focus outline */\n.button {\n  background-color: #0069d9;               /* Ensure > 4.5:1 on #fff text */\n  color: #ffffff;\n  border: none;\n  padding: 0.5rem 1rem;\n  border-radius: 4px;\n  cursor: pointer;\n  outline: none;\n  transition: background-color 0.2s ease;\n}\n\n/* Focus-visible – keep at least 3 px solid contrast */\n.button:focus-visible {\n  box-shadow: 0 0 0 3px rgba(255, 255, 255, 0.6),\n              0 0 0 5px rgba(0, 105, 217, 0.8);\n}\n\n/* Hover state – maintain contrast */\n.button:hover {\n  background-color: #0053b3;               /* Slightly darker, still ≥ 4.5:1 */\n}\n```\n\n*src/components/Button.tsx* – Add ARIA label when button text is ambiguous  \n\n```tsx\nimport React from 'react';\nimport styles from './button.css';\n\ninterface ButtonProps {\n  onClick: () => void;\n  children: React.ReactNode;\n  /** Optional accessible label when visible text isn’t descriptive */\n  ariaLabel?: string;\n  /** Optional id for aria-describedby */\n  ariaId?: string;\n}\n\nexport const Button: React.FC<ButtonProps> = ({\n  onClick,\n  children,\n  ariaLabel,\n  ariaId,\n}) => {\n  const hasAriaLabel = ariaLabel ? `aria-label=\"${ariaLabel}\"` : '';\n  const hasAriaId = ariaId ? `id=\"${ariaId}\"` : '';\n\n  return (\n    <button\n      type=\"button\"\n      className={styles.button}\n      onClick={onClick}\n      {hasAriaLabel}\n      {hasAriaId}\n      // Ensure screen readers announce the purpose if text alone isn’t enough\n      // Example: <button aria-label=\"Delete user\">Delete</button>\n    >\n      {children}\n    </button>\n  );\n};\n```\n\n*Example usage after patch*  \n\n```tsx\n// Before – only visible text, no explicit label\n<Button onClick={deleteUser}>Delete</Button>\n\n// After – provide a clear accessible label\n<Button onClick={deleteUser} ariaLabel=\"Delete user\">Delete</Button>\n```\n\n---\n\n**Next step:** Execute the audit script, record any buttons that fail contrast or lack ARIA labels, then apply the above updates. Once the PR is ready, @WebDesigner can review the contrast values and approve any color adjustments."
    agent_task_id: task-bd-018-1769123878947133337
    agent_tokens: "2304"
    agent_worker_id: worker-agent-1769123855-Web Designer (Active)-1769123855
    dispatch_history: '["agent-1769123855-Web Designer (Active)"]'
    last_run_at: "2026-01-22T23:18:32Z"
    loop_detected: "false"
    provider_id: sparky-vllm
    provider_model: nvidia/NVIDIA-Nemotron-3-Nano-30B-A3B-FP8
    redispatch_requested: "false"
createdat: 2026-01-22T23:14:12.76411576Z
updatedat: 2026-01-22T23:18:32.447977839Z
closedat: null
