entitymetadata:
    schemaversion: ""
    attributes: {}
    migratedat: null
    migratedfrom: ""
id: bd-026
type: feature
title: Implement structured logging with JSON output
description: |-
    Replace standard log with structured logger (zerolog or zap).

    Benefits:
    - Better log aggregation in K8s
    - Queryable structured fields
    - Standard format for log parsing
    - Correlation IDs for tracing

    Implementation:
    1. Choose logger: zerolog (lighter) or zap (faster)
    2. Add library: go get github.com/rs/zerolog
    3. Replace all log.Printf calls with structured equivalents
    4. Add standard fields: level, timestamp, caller, message
    5. Add contextual fields: agent_id, bead_id, command, duration
    6. Configure via LOG_LEVEL env var
    7. Output JSON format for production

    Example:
    log.Info().
      Str("agent_id", agentID).
      Str("bead_id", beadID).
      Int("exit_code", exitCode).
      Dur("duration", duration).
      Msg("Command executed")

    Deliverables:
    - All logging converted to structured format
    - JSON output in production mode
    - Configurable log levels
status: in_progress
priority: 2
projectid: agenticorp-self
assignedto: agent-1769155372-Code Reviewer (Default)
blockedby: []
blocks: []
relatedto: []
parent: ""
children: []
tags: []
context:
    agent_id: agent-1769155372-Code Reviewer (Default)
    agent_output: |
        [mock] Work on bead bd-026: Implement structured logging with JSON output

        Context:
        Project: AgentiCorp Self-Improvement (agenticorp-self)
        Branch: main

        Project Context:
        - description: The AgentiCorp project itself - perpetual self-improvement
        - test_command: go test ./...
        - build_command: go build

        Bead ID: bd-026
        Type: feature
        Priority: P2
        Status: in_progress

        Bead Description:
        Replace standard log with structured logger (zerolog or zap).

        Benefits:
        - Better log aggregation in K8s
        - Queryable structured fields
        - Standard format for log parsing
        - Correlation IDs for tracing

        Implementation:
        1. Choose logger: zerolog (lighter) or zap (faster)
        2. Add library: go get github.com/rs/zerolog
        3. Replace all log.Printf calls with structured equivalents
        4. Add standard fields: level, timestamp, caller, message
        5. Add contextual fields: agent_id, bead_id, command, duration
        6. Configure via LOG_LEVEL env var
        7. Output JSON format for production

        Example:
        log.Info().
          Str("agent_id", agentID).
          Str("bead_id", beadID).
          Int("exit_code", exitCode).
          Dur("duration", duration).
          Msg("Command executed")

        Deliverables:
        - All logging converted to structured format
        - JSON output in production mode
        - Configurable log levels

        Output format:
        1) Short plan
        2) Key questions/risks
        3) Concrete next actions (commands/files to change)
        4) Proposed patch snippets if applicable
    agent_task_id: task-bd-026-1769159643394694333
    agent_tokens: "2743"
    agent_worker_id: worker-agent-1769155372-Code Reviewer (Default)-1769159640
    dispatch_history: '["agent-1769155372-Code Reviewer (Default)"]'
    last_run_at: "2026-01-23T09:14:03Z"
    loop_detected: "false"
    provider_id: puck
    provider_model: nvidia/NVIDIA-Nemotron-3-Nano-30B-A3B-FP8
    redispatch_requested: "false"
createdat: 2026-01-23T00:07:43.381036635Z
updatedat: 2026-01-23T09:14:03.468051625Z
closedat: null
