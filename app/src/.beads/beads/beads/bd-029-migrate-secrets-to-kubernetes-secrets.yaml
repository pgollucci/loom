entitymetadata:
    schemaversion: ""
    attributes: {}
    migratedat: null
    migratedfrom: ""
id: bd-029
type: task
title: Migrate secrets to Kubernetes Secrets
description: |-
    Move sensitive configuration from environment variables to K8s Secrets.

    Current issues:
    - Passwords in docker-compose.yml
    - Secrets visible in pod specs
    - No rotation capability
    - No audit trail

    Implementation:
    1. Create k8s/secret.yaml for sensitive data
    2. Generate strong passwords (not hardcoded)
    3. Update deployment to reference secrets via secretKeyRef
    4. Remove secrets from docker-compose.yml
    5. Document secret creation process
    6. Consider External Secrets Operator for production

    Secrets to migrate:
    - AGENTICORP_PASSWORD
    - JWT_SECRET
    - Database credentials
    - SSH keys (if stored)

    Deliverables:
    - K8s Secret manifests
    - Updated deployment referencing secrets
    - Secret rotation documentation
status: in_progress
priority: 1
projectid: agenticorp-self
assignedto: agent-1769155372-Code Reviewer (Default)
blockedby: []
blocks: []
relatedto: []
parent: ""
children: []
tags: []
context:
    agent_id: agent-1769155372-Code Reviewer (Default)
    agent_output: |
        [mock] Work on bead bd-029: Migrate secrets to Kubernetes Secrets

        Context:
        Project: AgentiCorp Self-Improvement (agenticorp-self)
        Branch: main

        Project Context:
        - test_command: go test ./...
        - build_command: go build
        - description: The AgentiCorp project itself - perpetual self-improvement

        Bead ID: bd-029
        Type: task
        Priority: P1
        Status: in_progress

        Bead Description:
        Move sensitive configuration from environment variables to K8s Secrets.

        Current issues:
        - Passwords in docker-compose.yml
        - Secrets visible in pod specs
        - No rotation capability
        - No audit trail

        Implementation:
        1. Create k8s/secret.yaml for sensitive data
        2. Generate strong passwords (not hardcoded)
        3. Update deployment to reference secrets via secretKeyRef
        4. Remove secrets from docker-compose.yml
        5. Document secret creation process
        6. Consider External Secrets Operator for production

        Secrets to migrate:
        - AGENTICORP_PASSWORD
        - JWT_SECRET
        - Database credentials
        - SSH keys (if stored)

        Deliverables:
        - K8s Secret manifests
        - Updated deployment referencing secrets
        - Secret rotation documentation

        Output format:
        1) Short plan
        2) Key questions/risks
        3) Concrete next actions (commands/files to change)
        4) Proposed patch snippets if applicable
    agent_task_id: task-bd-029-1769159641967949180
    agent_tokens: "2441"
    agent_worker_id: worker-agent-1769155372-Code Reviewer (Default)-1769159640
    dispatch_history: '["agent-1769155372-Code Reviewer (Default)"]'
    last_run_at: "2026-01-23T09:14:02Z"
    loop_detected: "false"
    provider_id: puck
    provider_model: nvidia/NVIDIA-Nemotron-3-Nano-30B-A3B-FP8
    redispatch_requested: "false"
createdat: 2026-01-23T00:07:52.122215333Z
updatedat: 2026-01-23T09:14:02.029164722Z
closedat: null
