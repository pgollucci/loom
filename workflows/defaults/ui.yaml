id: "wf-ui-default"
name: "UI/Design Workflow"
description: "Workflow for UI bugs and design improvements"
workflow_type: "ui"
is_default: true

nodes:
  - node_key: "designer_investigate"
    node_type: "task"
    role_required: "Web Designer"
    persona_hint: "default/web-designer"
    max_attempts: 3
    timeout_minutes: 60
    instructions: |
      Investigate this UI issue:
      1. Review UI code (HTML, CSS, JavaScript)
      2. Identify visual or interaction problems
      3. Analyze root cause
      4. Propose design fix
      5. Create approval bead with findings

  - node_key: "pm_review"
    node_type: "approval"
    role_required: "Product Manager"
    persona_hint: "default/product-manager"
    max_attempts: 1
    timeout_minutes: 60
    instructions: |
      Review the UI investigation:
      1. Assess user impact
      2. Verify proposed fix maintains design consistency
      3. Approve or reject with feedback

  - node_key: "designer_implement"
    node_type: "task"
    role_required: "Web Designer"
    persona_hint: "default/web-designer"
    max_attempts: 3
    timeout_minutes: 90
    instructions: |
      Implement the UI fix:
      1. Apply changes to HTML/CSS/JavaScript
      2. Test across browsers if needed
      3. Ensure responsive design works
      4. Verify visual consistency

  - node_key: "commit_and_push"
    node_type: "commit"
    role_required: "Web Designer"
    persona_hint: "default/web-designer"
    max_attempts: 2
    timeout_minutes: 15
    instructions: |
      Commit and push the UI changes:
      1. Stage all UI changes
      2. Create descriptive commit message
      3. Push to remote repository

  - node_key: "qa_verify"
    node_type: "verify"
    role_required: "QA"
    persona_hint: "default/qa"
    max_attempts: 2
    timeout_minutes: 30
    instructions: |
      Verify the UI fix:
      1. Test visual changes
      2. Verify responsive design
      3. Check browser compatibility
      4. Approve or reject with findings

edges:
  # Start → designer_investigate
  - from_node_key: ""
    to_node_key: "designer_investigate"
    condition: "success"
    priority: 100

  # designer_investigate → pm_review (on success)
  - from_node_key: "designer_investigate"
    to_node_key: "pm_review"
    condition: "success"
    priority: 100

  # designer_investigate → escalate (on failure)
  - from_node_key: "designer_investigate"
    to_node_key: ""
    condition: "escalated"
    priority: 90

  # pm_review → designer_implement (on approval)
  - from_node_key: "pm_review"
    to_node_key: "designer_implement"
    condition: "approved"
    priority: 100

  # pm_review → designer_investigate (on rejection)
  - from_node_key: "pm_review"
    to_node_key: "designer_investigate"
    condition: "rejected"
    priority: 100

  # designer_implement → commit_and_push (on success)
  - from_node_key: "designer_implement"
    to_node_key: "commit_and_push"
    condition: "success"
    priority: 100

  # designer_implement → designer_investigate (on failure)
  - from_node_key: "designer_implement"
    to_node_key: "designer_investigate"
    condition: "failure"
    priority: 100

  # commit_and_push → qa_verify (on success)
  - from_node_key: "commit_and_push"
    to_node_key: "qa_verify"
    condition: "success"
    priority: 100

  # commit_and_push → designer_implement (on failure)
  - from_node_key: "commit_and_push"
    to_node_key: "designer_implement"
    condition: "failure"
    priority: 100

  # qa_verify → end (on approval)
  - from_node_key: "qa_verify"
    to_node_key: ""
    condition: "approved"
    priority: 100

  # qa_verify → designer_implement (on rejection)
  - from_node_key: "qa_verify"
    to_node_key: "designer_implement"
    condition: "rejected"
    priority: 100
