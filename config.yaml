# AgentiCorp Configuration

server:
  http_port: 8080
  https_port: 8443
  enable_http: true
  enable_https: false
  tls_cert_file: ""  # Path to TLS certificate (when ready)
  tls_key_file: ""   # Path to TLS key (when ready)
  read_timeout: 30s
  write_timeout: 30s
  idle_timeout: 120s

database:
  type: sqlite
  path: /app/data/agenticorp.db  # Persisted volume mount

beads:
  bd_path: bd  # Path to bd executable
  auto_sync: true
  sync_interval: 5m
  compact_old_days: 90  # Compact closed beads older than 90 days

agents:
  max_concurrent: 10
  default_persona_path: ./personas
  heartbeat_interval: 30s
  file_lock_timeout: 10m

security:
  enable_auth: true  # ENABLED FOR PRODUCTION
  pki_enabled: false  # Will be enabled when certificates are provided
  ca_file: ""
  require_https: false
  jwt_secret: "change-me-in-production"
  allowed_origins:
    - "*"  # CORS - adjust in production
  # api_keys:
  #   - "your-api-key-here"

temporal:
  host: localhost:7233
  namespace: default
  task_queue: agenticorp-tasks
  workflow_execution_timeout: 24h
  workflow_task_timeout: 10s
  enable_event_bus: true
  event_buffer_size: 1000

cache:
  enabled: true               # Enable response caching
  default_ttl: 1h             # Default time-to-live for cache entries
  max_size: 10000             # Maximum number of cached entries
  max_memory_mb: 500          # Maximum memory usage (approximate)
  cleanup_period: 5m          # How often to clean expired entries

providers:
  - id: puck-local
    name: Puck Local
    type: local
    endpoint: http://puck.local:8000/v1
    model: nvidia/NVIDIA-Nemotron-3-Nano-30B-A3B-FP8
    enabled: true
  - id: sparky-local
    name: Sparky Local
    type: local
    endpoint: http://sparky.local:8000/v1
    model: nvidia/NVIDIA-Nemotron-3-Nano-30B-A3B-FP8
    enabled: true

projects:
  - id: agenticorp-self
    name: AgentiCorp Self-Improvement
    git_repo: https://github.com/jordanhubbard/AgentiCorp
    branch: main
    beads_path: .beads
    is_perpetual: true
    is_sticky: true
    context:
      build_command: "go build"
      test_command: "go test ./..."
      description: "The AgentiCorp project itself - perpetual self-improvement"
  # NOTE: Only one project should be configured at a time until multi-project
  # agent allocation is fixed. The system has a global max_concurrent agent limit
  # that prevents multiple projects from having their own agent teams.
  # - id: example-project
  #   name: Example Project
  #   git_repo: /path/to/repo
  #   branch: main
  #   beads_path: .beads
  #   context:
  #     build_command: "make build"
  #     test_command: "make test"

web_ui:
  enabled: true
  static_path: /app/src/web/static  # Use volume-mounted files for live updates
  refresh_interval: 5  # seconds
